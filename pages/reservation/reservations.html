<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="/pages/reservation/reservations.css"
      media="screen"
    />
    <title>Vinvenzo</title>
  </head>
  <body>
    <script defer src="/components/header/header-page.js"></script>
    <script defer src="/components/language-select/language-select.js"></script>
    <script defer src="/components/footer/footer-page.js"></script>
    <script defer src="/components/hotel-container/hotel-container.js"></script>
    <script defer src="/components/search-input/search-input.js"></script>
    <script defer src="/components/popup/modal-popup.js"></script>
    <script defer src="/components/range/input-range.js"></script>
    <script
      defer
      src="/components/open-door-button/open-door-button.js"
    ></script>
    <script
      defer
      src="/pages/reservation/home/options/lighting/lighting-content.js"
    ></script>
    <script
      defer
      src="/pages/reservation/home/options/air-conditioning/air-conditioning-content.js"
    ></script>
    <script
      defer
      src="/pages/reservation/home/options/tv/tv-content.js"
    ></script>

    <header-page
      class="reservation-skeleton"
      header-type="primary"
      title-header="Olá, Washington"
    ></header-page>

    <main class="reservation-container">
      <search-input class="reservation-skeleton"></search-input>

      <h1 class="reservation-skeleton">Proximas reservas</h1>

      <hotel-container
        class="reservation-skeleton"
        reservation-code="GHJ056"
        reservation-room="Suíte presidencial"
        room-number="256"
        checkin-date="20/08/2021"
        checkout-date="29/08/2021"
      >
        <div class="reservation-container-hotel" slot="hotel">
          <img src="/pages/reservation/images/vivenzo-logo.png" alt="" />
          <div>
            <span>Hotel Vivenzo</span>
            <span>Belo Horizone -MG</span>
          </div>
        </div>
        <div class="reservation-container-buttons" slot="actions">
          <button onclick="next()">Detalhes</button>
        </div>
      </hotel-container>

      <hotel-container
        class="reservation-skeleton"
        reservation-code="DFR511"
        reservation-room="Suíte presidencial"
        room-number="264"
        checkin-date="20/08/2021"
        checkout-date="29/08/2021"
      >
        <div class="reservation-container-hotel" slot="hotel">
          <img src="/pages/reservation/images/vivenzo-logo.png" alt="" />
          <div>
            <span>Hotel Vivenzo</span>
            <span>Belo Horizone -MG</span>
          </div>
        </div>
        <div class="reservation-container-buttons" slot="actions">
          <button onclick="next()">Detalhes</button>
        </div>
      </hotel-container>

      <h1 class="reservation-skeleton">Reserva atual</h1>

      <hotel-container
        class="reservation-skeleton"
        reservation-code="TGG488"
        reservation-room="Quarto comum"
        room-number="125"
        checkin-date="20/08/2021"
        checkout-date="29/08/2021"
      >
        <div class="reservation-container-hotel" slot="hotel">
          <img src="/pages/reservation/images/primme-logo.png" alt="" />
          <div>
            <span>Primme Hotel</span>
            <span>Paulo Afonso - BA</span>
          </div>
        </div>
        <div class="reservation-container-buttons" slot="actions">
          <modal-popup>
            <button slot="button-content">Controles</button>
            <img
              slot="icon-popup"
              src="/pages/reservation/icons/lamp.svg"
              alt=""
            />
            <div class="reservation-container-buttons-controls" slot="content">
              <modal-popup
                is-overlaid="true"
                class="reservation-container-buttons-controls-icon"
              >
                <div slot="button-content">
                  <img src="/pages/reservation/icons/lamp.svg" alt="" />
                  <p>Iluminação</p>
                </div>
                <img
                  slot="icon-popup"
                  src="/pages/reservation/icons/lamp.svg"
                  alt=""
                />
                <div slot="content">
                  <lighting-content></lighting-content>
                </div>
              </modal-popup>
              <modal-popup
                is-overlaid="true"
                class="reservation-container-buttons-controls-icon"
              >
                <div slot="button-content">
                  <img
                    src="/pages/reservation/icons/air-conditioning.svg"
                    alt=""
                  />
                  <p>Climatização</p>
                </div>
                <img
                  slot="icon-popup"
                  src="/pages/reservation/icons/air-conditioning.svg"
                  alt=""
                />
                <div slot="content">
                  <air-conditioning-content></air-conditioning-content>
                </div>
              </modal-popup>
              <modal-popup
                is-overlaid="true"
                class="reservation-container-buttons-controls-icon"
              >
                <div slot="button-content">
                  <img src="/pages/reservation/icons/tv.svg" alt="" />
                  <p>TV</p>
                </div>
                <img
                  slot="icon-popup"
                  src="/pages/reservation/icons/tv.svg"
                  alt=""
                />
                <div slot="content">
                  <tv-content></tv-content>
                </div>
              </modal-popup>
            </div>
          </modal-popup>
          <open-door-button></open-door-button>
        </div>
      </hotel-container>
    </main>

    <footer-page class="reservation-skeleton"></footer-page>

    <script>
      const allReservationSkeleton = document.querySelectorAll(
        ".reservation-skeleton"
      );

      const nextPage = window.parent.document.getElementById("home");

      const isNotSafari = !(
        /Safari/.test(navigator.userAgent) &&
        /Apple Computer/.test(navigator.vendor)
      );

      function next() {
        if (isNotSafari) {
          window.parent.document.getElementById("success").style.display =
           "none";
        }
        nextPage.scrollIntoView();
      }
      const targetElement =
        window.parent.document.getElementById("reservations");

      function executeFunctionWhenElementInViewport(entries, observer) {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            
            nextPage.contentWindow.location.reload();
            document.querySelector('footer-page').style.display = 'block';
            setTimeout(function () {
              allReservationSkeleton.forEach((item) => {
                item.classList.remove("reservation-skeleton");
              });
              
            }, 3000);
          }
        });
      }

      const observer = new IntersectionObserver(
        executeFunctionWhenElementInViewport,
        { threshold: 1 }
      );

      observer.observe(targetElement);

      document
        .querySelector(".reservation-container search-input")
        .addEventListener("focusin", () => {
          if (isNotSafari) {
             window.parent.document.getElementById("success").style.display =
               "none";
          }
          document.querySelector("footer-page").style.display = "none";
        });

      document
        .querySelector(".reservation-container search-input")
        .addEventListener("focusout", () => {
          if (isNotSafari) {
            window.parent.document.getElementById("success").style.display =
               "none";
          }
          document.querySelector("footer-page").style.display = "flex";
        });
    </script>
  </body>
</html>
